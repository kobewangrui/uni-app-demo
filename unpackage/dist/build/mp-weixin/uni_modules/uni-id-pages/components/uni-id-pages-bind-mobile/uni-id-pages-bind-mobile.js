(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["uni_modules/uni-id-pages/components/uni-id-pages-bind-mobile/uni-id-pages-bind-mobile"],{3526:function(n,e,t){},"3cca":function(n,e,t){"use strict";(function(n,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=i(t("a34a"));function i(n){return n&&n.__esModule?n:{default:n}}function c(n,e,t,o,u,i,c){try{var r=n[i](c),a=r.value}catch(s){return void t(s)}r.done?e(a):Promise.resolve(a).then(o,u)}function r(n){return function(){var e=this,t=arguments;return new Promise((function(o,u){var i=n.apply(e,t);function r(n){c(i,o,u,r,a,"next",n)}function a(n){c(i,o,u,r,a,"throw",n)}r(void 0)}))}}var a=n.database(),s=(a.collection("uni-id-users"),n.importObject("uni-id-co")),l={emits:["success"],computed:{},data:function(){return{}},methods:{beforeGetphonenumber:function(){return r(u.default.mark((function e(){return u.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,t){o.showLoading({mask:!0}),wx.checkSession({success:function(){console.log("session_key 未过期"),e(),o.hideLoading()},fail:function(){console.log("session_key 已经失效，正在执行更新"),wx.login({success:function(u){var i=u.code;n.importObject("uni-id-co",{customUI:!0}).loginByWeixin({code:i}).then((function(n){console.log(n),e()})).catch((function(n){console.log(n),t()})).finally((function(n){console.log(n),o.hideLoading()}))},fail:function(n){console.error(n),t()}})}})}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()},bindMobileByMpWeixin:function(n){var e=this;return r(u.default.mark((function t(){return u.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log(n),"getPhoneNumber:ok"!=n.detail.errMsg){t.next=8;break}return console.log(n.detail),t.next=5,e.beforeGetphonenumber();case 5:s.bindMobileByMpWeixin(n.detail).then((function(n){console.log(n),e.$emit("success")})).finally((function(n){e.closeMe()})),t.next=9;break;case 8:e.closeMe();case 9:case"end":return t.stop()}}),t)})))()},open:function(){var n=this;return r(u.default.mark((function e(){return u.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n.$refs.popup.open();case 1:case"end":return e.stop()}}),e)})))()},closeMe:function(n){this.$refs.popup.close()}}};e.default=l}).call(this,t("a9ff")["default"],t("543d")["default"])},"6ebc":function(n,e,t){"use strict";t.d(e,"b",(function(){return u})),t.d(e,"c",(function(){return i})),t.d(e,"a",(function(){return o}));var o={uniPopup:function(){return t.e("uni_modules/uni-popup/components/uni-popup/uni-popup").then(t.bind(null,"afc3"))}},u=function(){var n=this,e=n.$createElement;n._self._c},i=[]},"9da4":function(n,e,t){"use strict";t.r(e);var o=t("6ebc"),u=t("cd61");for(var i in u)"default"!==i&&function(n){t.d(e,n,(function(){return u[n]}))}(i);t("aab3");var c,r=t("f0c5"),a=Object(r["a"])(u["default"],o["b"],o["c"],!1,null,"c3b5bed8",null,!1,o["a"],c);e["default"]=a.exports},aab3:function(n,e,t){"use strict";var o=t("3526"),u=t.n(o);u.a},cd61:function(n,e,t){"use strict";t.r(e);var o=t("3cca"),u=t.n(o);for(var i in o)"default"!==i&&function(n){t.d(e,n,(function(){return o[n]}))}(i);e["default"]=u.a}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'uni_modules/uni-id-pages/components/uni-id-pages-bind-mobile/uni-id-pages-bind-mobile-create-component',
    {
        'uni_modules/uni-id-pages/components/uni-id-pages-bind-mobile/uni-id-pages-bind-mobile-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("9da4"))
        })
    },
    [['uni_modules/uni-id-pages/components/uni-id-pages-bind-mobile/uni-id-pages-bind-mobile-create-component']]
]);
